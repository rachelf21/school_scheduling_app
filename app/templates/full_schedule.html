{% extends "base.html" %} {% block scale %}
<meta
  name="viewport"
  content="width=device-width, initial-scale=.6, user-scalable=yes, maximum-scale=4.0, minimum-scale=.06, shrink-to-fit=no"
/>
{% endblock %} {% block title %}MDY Schedule{% endblock %} {% block content %}
<script src="/static/js/full_schedule.js"></script>
<div class="d-flex justify-content-around" style="border: 0px solid red">
  <button id="next" class="btn btn-sm" onclick="get_prev()" style="display: block" disabled>
    <i class="fa fa-angle-left text-muted" style="font-size: 36px"></i>
  </button>
  <h1 class="mt-1 4 text-center display-4">{{title}}</h1>
  <button id="prev" class="btn btn-sm" onclick="get_next()" style="display: block" disabled>
    <i class="fa fa-angle-right text-muted" style="font-size: 36px"></i>
  </button>
</div>
<script>
  console.log("hello there");
  var wk = "{{current_week}}";
  var dow = ["A_M", "A_T", "A_W", "A_Th"]; //change this to wk variable later
  var per = [0, 1, 2, 3, 4, 5, "L", 6, 7, 8, 9, 10];
</script>
<style>
  a {
    color: black;
  }
  a:hover {
    color: blue;
    text-decoration: none;
    font-weight: bold;
  }
  td:hover {
    background-color: #e0ffff !important;
  }

  td a {
    width: 100%;
    display: block;
  }
</style>
<div class="table-responsive">
  <table
    id="myTable"
    class="table mx-auto table-bordered text-center mt-4 pt-4 w-auto table-fixed"
    style="border: 0px solid green; width: auto; margin: 0px auto"
  >
    <thead style="border-width: medium">
      <th>Per</th>
      <th>Time</th>
      <th>Monday</th>
      <th>Tuesday</th>
      <th>Wednesday</th>
      <th>Thursday</th>
    </thead>

    <tbody>
      {%for n in range(11)%}

      <tr>
        <script>
          var paleyellow = "rgb(252, 255, 217)";
          var curr_per = per[{{n}}+1];
          if (curr_per == 'L' || curr_per == '8'){
            document.currentScript.parentElement.style.background = "Gainsboro";
          }
        </script>

        <td class="display-4" style="border-width: medium">
          <script>
            document.write(curr_per);
          </script>
        </td>
        <td style="border-width: medium">{{start_times[n]}}<br />-<br />{{end_times[n]}}</td>
        <td style="border-width: medium; vertical-align: middle">
          <a
            >{{mon.courseid[n]}}
            <script>
              var parent = document.currentScript.parentElement;
              console.log(parent);
              var schedid = "{{mon.scheduleid[n]}}".substring(0, 3);
              var curr_class = "{{mon.courseid[n]}}".substring(0, 5);
              var curr_course = "{{mon.courseid[n]}}";
              if (curr_course.includes("Computers")) {
                document.currentScript.parentElement.parentElement.style.background = paleyellow;
              } else if (curr_course.includes("STEM")) {
                if (curr_course.includes("7")) document.currentScript.parentElement.parentElement.style.background = "HoneyDew";
                else document.currentScript.parentElement.parentElement.style.background = "LavenderBlush";
              }
              var link_text = "/attendance/" + curr_class + "/" + curr_course + "/" + schedid + "/" + curr_per;
              console.log(link_text);
              parent.setAttribute("href", link_text);
              parent.style.cssText = "width:100%; display:block";
            </script>
          </a>
        </td>
        <td style="border-width: medium; vertical-align: middle">
          <a>
            {{tues.courseid[n]}}
            <script>
              var parent = document.currentScript.parentElement;
              console.log(parent);
              var schedid = "{{tues.scheduleid[n]}}".substring(0, 3);
              var curr_class = "{{tues.courseid[n]}}".substring(0, 5);
              var curr_course = "{{tues.courseid[n]}}";
              var link_text = "/attendance/" + curr_class + "/" + curr_course + "/" + schedid + "/" + curr_per;
              console.log(link_text);
              if (curr_course.includes("Computers")) {
                document.currentScript.parentElement.parentElement.style.background = paleyellow;
              } else if (curr_course.includes("STEM")) {
                if (curr_course.includes("7")) document.currentScript.parentElement.parentElement.style.background = "HoneyDew";
                else document.currentScript.parentElement.parentElement.style.background = "LavenderBlush";
              }
              parent.setAttribute("href", link_text);
            </script>
          </a>
        </td>
        <td style="border-width: medium; vertical-align: middle">
          <a>
            {{wed.courseid[n]}}
            <script>
              var parent = document.currentScript.parentElement;
              console.log(parent);
              var schedid = "{{wed.scheduleid[n]}}".substring(0, 3);
              var curr_class = "{{wed.courseid[n]}}".substring(0, 5);
              var curr_course = "{{wed.courseid[n]}}";
              var link_text = "/attendance/" + curr_class + "/" + curr_course + "/" + schedid + "/" + curr_per;
              console.log(link_text);
              if (curr_course.includes("Computers")) {
                document.currentScript.parentElement.parentElement.style.background = paleyellow;
              } else if (curr_course.includes("STEM")) {
                if (curr_course.includes("7")) document.currentScript.parentElement.parentElement.style.background = "HoneyDew";
                else document.currentScript.parentElement.parentElement.style.background = "LavenderBlush";
              }

              parent.setAttribute("href", link_text);
            </script>
          </a>
        </td>
        <td style="border-width: medium; vertical-align: middle">
          <a>
            {{thurs.courseid[n]}}
            <script>
              var parent = document.currentScript.parentElement;
              console.log(parent);
              var schedid = "{{thurs.scheduleid[n]}}".substring(0, 4);
              var curr_class = "{{thurs.courseid[n]}}".substring(0, 5);
              var curr_course = "{{thurs.courseid[n]}}";
              var link_text = "/attendance/" + curr_class + "/" + curr_course + "/" + schedid + "/" + curr_per;
              console.log(link_text);
              if (curr_course.includes("Computers")) {
                document.currentScript.parentElement.parentElement.style.background = paleyellow;
              } else if (curr_course.includes("STEM")) {
                if (curr_course.includes("7")) document.currentScript.parentElement.parentElement.style.background = "HoneyDew";
                else document.currentScript.parentElement.parentElement.style.background = "LavenderBlush";
              }
              parent.setAttribute("href", link_text);
            </script>
          </a>
        </td>
      </tr>
      {%endfor%}
    </tbody>
  </table>
</div>

<script>
  var current_week = "{{current_week}}";
  window.onload = function () {
    if (current_week == "A") {
      document.getElementById("weekA").classList.add("active");
      document.getElementById("weekB").classList.remove("active");
    } else if (current_week == "B") {
      document.getElementById("weekB").classList.add("active");
      document.getElementById("weekA").classList.remove("active");
    }
  };
</script>
<hr class="mt-4 mb-4" />
{% endblock content %}
