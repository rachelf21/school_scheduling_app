{% extends "base.html" %} {% block scale %}
<meta
  name="viewport"
  content="width=device-width, initial-scale=.6, user-scalable=yes, maximum-scale=4.0, minimum-scale=.06, shrink-to-fit=yes"
/>
{% endblock %} {% block title %}MDY Weekly Schedule{% endblock %} {% block content %}
<script src="/static/js/schedule.js"></script>

<div class="d-flex justify-content-around" style="border: 0px solid red">
  <button id="next" class="btn btn-sm" onclick="get_prev()" style="display: block" disabled>
    <i class="fa fa-angle-left text-muted" style="font-size: 36px"></i>
  </button>
  <h1 class="mt-1 4 text-center display-4">{{title}}</h1>
  <button id="prev" class="btn btn-sm" onclick="get_next()" style="display: block" disabled>
    <i class="fa fa-angle-right text-muted" style="font-size: 36px"></i>
  </button>
</div>

<script>
  var current_week = "{{current_week}}";
</script>

<style>
  a {
    color: black;
  }
  a:hover {
    color: blue;
    text-decoration: none;
  }
  td:hover {
    background-color: #e0ffff !important;
  }

  td a {
    display: block;
    width: 100%;
    height: 100%;
  }
</style>

<div class="table-responsive">
  <table
    id="myTable"
    class="table mx-auto table-bordered text-center mt-4 pt-4 w-auto table-fixed"
    style="border: 0px solid green; width: auto; margin: 0px auto"
  >
    <thead style="border-width: medium">
      <th>Per</th>
      <th>Time</th>
      <th>Monday</th>
      <th>Tuesday</th>
      <th>Wednesday</th>
      <th>Thursday</th>
    </thead>

    <tbody>
      {%for n in range(11)%}
      <tr>
        <script>
          var curr_per = per[{{n}}+1];
          if (curr_per == 'L' || curr_per == '8'){
            document.currentScript.parentElement.style.background = "Gainsboro";
          }
        </script>

        <td class="display-4" style="border-width: medium">
          <script>
            document.write(curr_per);
          </script>
        </td>
        <td style="border-width: medium">{{start_times[n]}}<br />-<br />{{end_times[n]}}</td>
        <td style="border-width: medium; vertical-align: middle">
          <a
            >{{mon.courseid[n]}}
            <script>
              var parent = document.currentScript.parentElement;
              var schedid = "{{mon.scheduleid[n]}}".substring(0, 3);
              var curr_class = "{{mon.courseid[n]}}".substring(0, 5);
              var curr_course = "{{mon.courseid[n]}}";
              color_code("{{mon.scheduleid[n]}}", "{{current_period}}");
            </script>
          </a>
        </td>
        <td style="border-width: medium; vertical-align: middle">
          <a>
            {{tues.courseid[n]}}
            <script>
              var parent = document.currentScript.parentElement;
              var schedid = "{{tues.scheduleid[n]}}".substring(0, 3);
              var curr_class = "{{tues.courseid[n]}}".substring(0, 5);
              var curr_course = "{{tues.courseid[n]}}";
              color_code("{{tues.scheduleid[n]}}", "{{current_period}}");
            </script>
          </a>
        </td>
        <td style="border-width: medium; vertical-align: middle">
          <a>
            {{wed.courseid[n]}}
            <script>
              var parent = document.currentScript.parentElement;
              var schedid = "{{wed.scheduleid[n]}}".substring(0, 3);
              var curr_class = "{{wed.courseid[n]}}".substring(0, 5);
              var curr_course = "{{wed.courseid[n]}}";
              color_code("{{wed.scheduleid[n]}}", "{{current_period}}");
            </script>
          </a>
        </td>
        <td style="border-width: medium; vertical-align: middle">
          <a>
            {{thurs.courseid[n]}}
            <script>
              var parent = document.currentScript.parentElement;
              var schedid = "{{thurs.scheduleid[n]}}".substring(0, 4);
              var curr_class = "{{thurs.courseid[n]}}".substring(0, 5);
              var curr_course = "{{thurs.courseid[n]}}";
              color_code("{{thurs.scheduleid[n]}}", "{{current_period}}");
            </script>
          </a>
        </td>
      </tr>
      {%endfor%}
    </tbody>
  </table>
</div>

<script>
  window.onload = function () {
    AutoRefresh(300000);

    if (current_week == "A") {
      document.getElementById("weekA").classList.add("active");
      document.getElementById("weekB").classList.remove("active");
    } else if (current_week == "B") {
      document.getElementById("weekB").classList.add("active");
      document.getElementById("weekA").classList.remove("active");
    }
  };
</script>
<hr class="mt-4 mb-4" />
{% endblock content %}
